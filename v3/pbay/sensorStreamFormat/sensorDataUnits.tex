\section{Sensor Data Units}\label{section:parameterUnits}
\subsection { Raw and Processed} 


The outputs of sensor boards need various units for each value.
The table below lists the units for sensor values.
`Raw Units' in the table means the unit for the packtized data, which you can get directly from the coresense boards, and `Processed Units' means the unit which can be used after data conversion through designated equations.
The equations will be provided comming subsections.


\begin{center}
\rowcolors{2}{white}{black!5}
\begin{longtable}{|l|l|l|l|}
\caption{Sensor units both in raw and processed format}
\label{table:parameterUnits} \\

\hline \rowcolor{white} \multicolumn{1}{|l|}{\textbf{Sensor/Parameter}} & \multicolumn{1}{l|}{\textbf{Raw Units}} & \multicolumn{1}{l|}{\textbf{Processed Units}} & \multicolumn{1}{l|}{\textbf{Comments}} \\ \hline
\endfirsthead

\multicolumn{4}{c}%
{{\bfseries \tablename\ \thetable{} -- continued from previous page}} \\

\hline \rowcolor{white} \multicolumn{1}{|l|}{\textbf{Sensor/Parameter}} & \multicolumn{1}{l|}{\textbf{Raw Units}} & \multicolumn{1}{l|}{\textbf{Processed Units}} & \multicolumn{1}{l|}{\textbf{Comments}} \\ \hline
\endhead

\hline \rowcolor{white} \multicolumn{4}{|r|}{{Continued on next page}} \\ \hline
\endfoot

\hline \hline
\endlastfoot

% 
% \begin{table}[H]
%     \centering
%     {\rowcolors{2}{black!8}{black!2}
%     \begin{tabular}{|l l l l|}
%         \hline
%         \textbf{Sensor/Parameter} & \textbf{Raw Units} & \textbf{Processed Units} & \textbf{Comments}\\
%         \hline
%         \hline
    \hline \rowcolor{white} \multicolumn{4}{|c|}{{Airsense board}} \\ \hline
    Air/Lightsense MAC & No Units & No Units & \\ % 6 Octets in hex notation separated by `:'\\
    TMP112 & \degree C & \degree C & \\
    HTU21D & \degree C, \%RH & \degree C, \%RH & \\
    HIH4030 & \%RH & \%RH & \\
    BMP180 & \degree C, Pa & \degree C, Pa & \\
    PR103J2 & integer & \degree C & \\
    TSL250RD & integer & $\mu$w/m$^2$ & \\ % **finalize after discussion with EVS** \\
    MMA8452Q & g, g, g, g & g, g, g, g & \\
    SPV1840LR5H-B & integer & dB & Pin: PA5(Atmel), A5(Due)\\ % integer & dB & \\
    TSYS01 & \degree C & \degree C & \\
    
    \hline \rowcolor{white} \multicolumn{4}{|c|}{{Lightsense board}} \\ \hline
    HMC5883L & G, G, G & G, G, G & \\
    HIH6130 & \degree C, \%RH & \degree C, \%RH & \\
    APDS-9006-020 & integer & lux & \\ % **finalize after discussion with EVS**\\
    TSL260RD & integer & $\mu$w/m$^2$ & \\ % **finalize after discussion with EVS** \\
    TSL250RD & integer & $\mu$w/m$^2$ & \\ % **finalize after discussion with EVS** \\
    MLX75305 & integer & $\mu$w/m$^2$ & \\ % **finalize after discussion with EVS** \\
    ML8511 & integer & UV index & \\ % **finalize after discussion with EVS** \\
%     D6T & \textit{Seventeen} \degree C values & \textit{Seventeen} \degree C values & \\
%    MLX90614 & \degree F & \degree C & \\
    TMP421 & \degree C & \degree C & \\
%     SPV1840LR5H-B & integer & dB & \\

    \hline \rowcolor{white} \multicolumn{4}{|c|}{{Chemsense board}} \\ \hline
    Total reducing gases & AFE ADC counts & & data not yet processed \\ 
%     Ethanol & integer & ppm & Quadratic equation with calibrated weights \\
    Nitrogen dioxide & AFE ADC counts & & data not yet processed \\ 
    Ozone & AFE ADC counts & & data not yet processed \\ 
    Hydrogen sulphide & AFE ADC counts & & data not yet processed \\ 
    Total oxidizing gases & AFE ADC counts & & data not yet processed \\
    Carbon monoxide & AFE ADC counts & & data not yet processed \\
    Sulfur dioxide & AFE ADC counts & & data not yet processed \\
    Sensirion (SHT25) & 100ths of \degree C, 100ths of \%RH & \degree C, \%RH & \\
    LPS25H & 100ths of \degree C, Pa & \degree C, Pa & \\
    Si1145 & fixed value & & firmware is not completed \\
    Intel MAC address & No Units & No Units & \\ 
%     Sensor status (health) & No Units & No Units & 4 bytes of sensor health data\\
    CO ADV temp & 100ths of \degree C & \degree C & \\
    IAQ IRR ADC temp & 100ths of \degree C & \degree C & \\
    O3 NO2 ADC temp & 100ths of \degree C & \degree C & \\
    SO2 H2S ADC temp & 100ths of \degree C & \degree C & \\
    CO LMP temp & 100ths of \degree C & \degree C & \\
    Accelerometer & Raw register & & data not yet processed \\
    Gyro & Raw register & & data not yet processed \\
    
    \hline \rowcolor{white} \multicolumn{4}{|c|}{{Alpha sensor}} \\ \hline
    Histogram & & & \\
    Firmware & & & \\
    Configuration & & & \\
    \hline
%     \end{tabular}
%     }
%     \caption{Sensor and Parameter units both in raw and processed format.}
%     \label{table:parameterUnits}
% \end{table}
\end{longtable}
\end{center}


\subsection{ conversion processure}

\subsection{Airsense:}
\subsubsection{ TMP112, HTU21D, HIH4030, BMP180, MMA8452Q, TSYS01} \label{ssec:first}

Raw outputs from the sensor boards for the sensors (TMP112, HTU21D, HIH4030, BMP180, MMA8452Q, and TSYS01) are the designated sensor value.

% Raw ouput of TMP112 is a digital 12-bit value. The 12-bit value is converted to temperature in centigrade using equation below and packetized. \\

% {\centering
%   temperature \((\degree C)\) = unsigned integer form of 12-bit digital output $\times$ 0.0625\par
% }
% 
% \bigbreak
% The equation refers to the resolution for the Temperature ADC in Internal Temperature mode which is 0.0625 \(\degree C/count\).

% \subsubsection{ HTU21D}
% Raw output values of HTU21D are digital 12-bits for temperature and 8-bits for relative humidity. The raw values are calculated to temperature in centigrade and relative humidity using equation below and packetized.
% 
% {\centering
%  \[ \text{temperature \((\degree C)\)} = \frac{\text{unsigned integer form of digital output}}{2^{16}} \times 175.72 - 46.85 \] 
%  \[ \text{humidity \((\%RH)\)} = \frac{\text{unsigned integer form of digital output}}{2^{16}} \times 125 - 6 \]
%  \par
%  }
% 
% \bigbreak
%  The calculated humidity is re-calculated in sensor plugin using temperature coefficient compensation equation. \\
% 
% {\centering
%  humidity \((\%RH)\) = unsigned integer form of  - (25 - temperature) $\times$ 0.15
%  \par
% }
% 
% \bigbreak
% The equation refers to temperature coefficient of the HTU21D(F) in 0.15 \(\%RH/\degree C\).
% 
% \subsubsection{ HIH4030}
% 
% Output of HIH4030 is an interger indicating output voltage from the sensor, which is mapped into an integer value between 0 and 1023. Coresensor firmware delivers the two bytes of raw integer value, and equations below can be used to calculate human-readable output value using output voltage from the sensor.
% 
% {\centering
%  \[ \text{output voltage \((V)\)} = \frac{\text{usinged integer raw output} \times 5}{1023} \] 
%  \[ \text{humidity \((\%RH)\)} = (\text{output voltage} - 0.85) \times \frac{100}{3} \]
%  \par
%  }
% \bigbreak
% The slope term (\(\frac{100}{3}\)) and y-intercept (0.85) are comming from a graph given in the HIH4030 sensor datasheet (figure 4). This slope and y-intercept can be different depending on temperature.
% 
% \subsubsection{ BMP180}
% 
% Ouput values of BMP180 are 16-bit/24-bit value (temperature/pressure), and the values are post-processed through a library provided by Adafruit Industries. Sensor output values from the coresensor firmware are temperature in centigrade and barometric pressure in pascal.


\subsubsection{ PR103J2}

Output of PR103J2 is an interger indicating output voltage from the sensor, which is mapped into integer values between 0 and 1023. The raw integer value can be converted to resistance value through the equations below. The resistance value is needed to find corresponding temperature in a resistance-temperature look-up table (PR103J2 R-T table).

\bigbreak


{\centering
 \[ \text{resistance } (\Omega) = 47000 \times \left(\frac{1023}{\text{raw integer}} - 1\right) \]
 \par
 }


\subsubsection{ TSL250RD}

Output of TSL250RD in airsense board is an interger indicating output voltage from the sensor, which is mapped into integer values between 0 and 1023. The raw interger value can be converted to irradiance of visible light in micro-watt per square meter through equations below.
% The equation refers to irradiance responsivity of TSL250RD which is 0.064 \(mV/(\mu W/cm^2\)), and 0.09 is output voltage of dark condition which is initial offset (without any light -- NEED TO BE CHECKED).

\bigbreak

{\centering
\[ \text{irradiance } (\mu W/m^2) = \frac{\text{raw integer} \times 5 - 0.09 \times 1023}{0.064 \times 1023} \]
\par
}


% {\centering
%  \[ \text{output voltage }(V) = \frac{\text{raw integer} \times 5}{1023} \] \\
%  \[ \text{irradiance } (\mu W/m^2) = \frac{\text{output voltage} - 0.09}{0.064} \]
%  \par
%  }


% \subsubsection{ MMA8452Q}
% 
% Ouput values of MMA8452Q are actual g value, this depends on scale being set.

\subsubsection{ SPV1840LR5H-B}

Output value of SPV1840LR5H-B is an interger indicating amplified output voltage from the sensor, which is mapped into integer values between 0 and 1023. The raw output can be converted to sound level in decibel (dB) through equations below.
% The equation refers to external gain as 453.33 which is determined by electric circle design, and input reference voltage as 3.3 (see schematics v3.1). 
% The equation to calculate sound level is convensional equation for voltage output to decibel (dB).

\bigbreak

{\centering
 \[ \text{output voltage }(V) = \frac{\text{raw integer} \times 5 - 1.75 \times 1023 \times 454.33}{453.33 \times 1023} \] \\
 \[ \text{sound level } (dB) = -20 \times \log_{10} \left( \frac{\text{output voltage}}{3.3}\right) \]
 \par
 }


% {\centering
%  \[ \text{amplified output voltage }(V) = \frac{\text{usinged integer raw output} \times 5}{1023} \] \\
%  \[ \text{raw output voltage }(V) = \frac{\text{amplified output voltage} - 1.75}{\text{external Gain}} - 1.75 \] \\
%  \[ \text{sound level } (dB) = -20 \times \log_{10} \left( \frac{\text{output voltage}}{\text{input reference voltage}}\right) \]
%  \par
%  }

%  
% \subsubsection{ TSYS01}
% 
% Raw ouput value of TSYS01 is post-processed value through a library provided by  Free Software Foundation, Inc.. Sensor output from the coresensor firmware is temperature in centigrade.

\bigbreak
\subsection{Lightsense:}
\subsubsection{ HMC5883L, HIH6130, TMP421}

Raw outputs from the sensor boards for the sensors (HMC5883L, HIH6130, and TMP421) are the designated sensor value.

% Ouput values of HMC5883L are post-processed values through a library provided by Adafruit Industries. Sensor output values from the coresensor firmware are acceleration values in Gauss.

% \subsubsection{ HIH6130}
% 
% Raw ouput values of HIH6130 are 14-bit temperature and humidity values. Coresensor firmware calculates temperature and humidity in centigrade and relative humidity using 14-bits of two bytes reading of the sensor output.
% 
% {\centering
%  \[ \text{temperature (\degree C)} = \frac{\text{unsigned integer form of digital output}}{2^{14} - 2} \times 165 - 40 \] 
%  \[ \text{humidity (\%RH)} = \frac{\text{unsigned integer form of digital output}}{2^{14} - 2} \times 100 \]
%  \par
%  }


\subsubsection[MCP3426]{ APDS-9006-020, TSL260RD, TSL250RD, MLX75305, ML8511 : \\ using MCP3426}

Output value of the ligth sensors (APDS-9006-020, TSL260RD, TSL250RD, MLX75305, and ML8511) are raw integer values which are proportional to the output voltage from the sensor.  The raw integers can be converted to irradiance through equations below. The calculated output voltage is needed to calculate irradiance for each sensor.

\bigbreak

{\centering
 \[ \text{output voltage }(V) = \frac{\text{raw integer} \times 2.048 \times 5 }{32767 \times 2}\]
 \par
 }

% Raw output value of MCP3426 is an digital output which is proportional to the input voltage and programmable gain amplifier (PGA) settings (see schematics v3.1). Default setting of PGA is x1, and we are using 16-bits resolution. Coresensor firmware delivers the two bytes of raw integer value, and coresensor plugin calculates irradiance of light in micro-watt per square meter using voltage output from each sensor. The voltage value need to be calculated regarding to the airsense circuit schematics and output modification equation for MCP3426 circuit. Coresensor firmware delivers the two bytes of raw integer value, and coresensor plugin calculates irradiance of visible light in a designated unit.
% 
% {\centering
%  \[ \text{output voltage of MCP3426 }(V) = \frac{\text{unsigned integer form of digital output}}{\text{maximum 16-bit code} + 1} * \text{reference voltage} \]
%  \[ \text{input voltage od MCP3426} = \frac{\text{output voltage of MCP3426} * 5}{2} \]
%  \par
%  }
% 
% \bigbreak
% The equation refers to maximum n-bit code which is \( 2^{n - 1} - 1 \), and in case of 16-bit code, the number is 32767. Also reference voltage of MCP3426 is 2.048 \(V\). According to schematics v3.1, the output voltage from each sensor is divided, so the original output voltage can be calculated by the equation given above.

\paragraph{a. APDS-9006-020}

Raw output value of APDS-9006-020 is an analog current which is proportional to the irradiance. The output current can be converted irradiance in lux through the equation below.

\bigbreak

{\centering
 \[ \text{irradiance } (\text{lux}) = \left( \frac{\text{output voltage}}{0.005} - 0.000156 \right) \times 2.5 \]
 \par
 }

% {\centering
%  \[ \text{output current }(\mu A) = \frac{\text{output voltage}}{0.005} \] 
%  \[ \text{irradiance } (lux) = {\text{output current} - 0.000156} * 2.5 \]
%  \par
%  }
%  
% \bigbreak
% The equation refers to resistance of 5 \(K \Omega \) which is used as 0.005 to calculate current with unit \(\mu A\) as shown in schematics v3.1. Also initial offset of the sensor is applied as 0.000156, and linear relationship factor as 2.5, however these sensor property can be changed base on experiments.
 
\paragraph{b. TSL260RD}

Raw output value of TSL260RD is an analog voltage which is inverse proportional to the irradiance. The output voltage can be calculated though the equation below.

\bigbreak

{\centering
 \[ \text{irradiance } (\mu W/m^2) = \frac{\text{output voltage} - 0.005313}{0.058} \]
 \par
 }
 
%  \bigbreak
%  The equation refers to irradiance responsivity of TSL260RD which is 0.058 \(mV/(\mu W/cm^2\)), and 0.005313 is output voltage of dark condition, which is initial offset (without any light -- NEED TO BE CHECKED).
%  

\paragraph{c. TSL250RD}

Raw output value of TSL250RD is an analog voltage which is inverse proportional to the irradiance. The output voltage can be calculated though the equation below.

\bigbreak

{\centering
 \[ \text{irradiance } (\mu W/m^2) = \frac{\text{output voltage} - 0.005313}{0.064} \]
 \par
 }
 
%  \bigbreak
%  The equation refers to irradiance responsivity of TSL250RD which is 0.064 \(mV/(\mu W/cm^2\)), and 0.005313 is output voltage of dark condition, which is initial offset (without any light -- NEED TO BE CHECKED).

\paragraph{d. MLX75305}

Raw output value of MLX75305 is an analog voltage which is inverse proportional to the irradiance. The output voltage can be calculated though the equation below.

\bigbreak

{\centering
 \[ \text{irradiance } (\mu W/m^2) = \frac{\text{output voltage} - 0.0996}{0.007} \]
 \par
 }
 
%  \bigbreak
%  The equation refers to irradiance responsivity of MLX75305 which is 0.007 \(mV/(\mu W/cm^2\)), and 0.0996 is output voltage of dark condition, which is initial offset (without any light -- NEED TO BE CHECKED).

\paragraph{e. ML8511}

Raw output value of ML8511 is an analog voltage which is proportional to the irradiance. The output voltage can be calculated though the equation below.

\bigbreak

{\centering
 \[ \text{UV index } = \frac{\text{output voltage}}{1.489} \times 1.49916 \]
 \par
 }
 
%  \bigbreak
%  The equation refers to proportional factor which is 1.49916. This factor is calculated regarding UV Index facfor related to solar irradiance spectrum, McKinlay-Differ Erythermal action spectrum (see ML8511 datasheet). And 1.489 is voltage output difference between when the sensor is at dark condition (no light) and at 1 \(mW/m^2\) irradiance (NEED TO BE CHECKED).

%\subsubsection{ MLX90614}

% \subsubsection{ TMP421}
% 
% Raw ouput value of TMP421 is 16-bit value, and the value is post-processed through a library provided by Free Software Foundation, Inc.. Sensor output from the coresensor firmware is temperature in centigrade.

% \subsubsection{ Lightsense MAC address}

\bigbreak
\subsection{Chemsense:}
\subsubsection{ Chemical sensors}

Given values of chemical sensors are AFE ADC counts.

\begin{itemize}
  \item Total reducing gases
  \item Nitrogen dioxide
  \item Ozone
  \item Hydrogen sulphide
  \item Total oxidizing gases
  \item Carbon monoxide
  \item Sulfur dioxide
\end{itemize}


\subsubsection{ SHT25, LPS25H}

Given values of SHT25 and LPS25H are 100ths of temperature in Celsius and 100ths of humidity value.

{\centering
 \[ \text{temperature }(\degree C) = \frac{\text{output value}}{100} \]
 \[ \text{humidity }(\% RH) = \frac{\text{output value}}{100} \]
 \par
 }

% \subsubsection{ LPS25H}
% 
% Given values of LPS25H through chemsense firmware are 100ths of temperature in centigrade and pressure in Pa.
% 
% {\centering 
%  \[ \text{temperature }(\degree C) = \frac{\text{output value}}{100} \]
% }

\subsubsection{ Si1145}

Si1145 is a light sensor. Raw values coming from the sensor are three fixed hex integers, however because Chemsense board driver is not completed the values are needed to be ignored (July 2016).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{ ADC Temperatures}
Chemsense board measures temperature of sensor ADCs. All of them give ADC temperature in 100ths of degree Celsius. This includes five parameters which are:
 
\begin{itemize}
  \item CO ADC Temp
  \item IAQ/IRR ADC Temp
  \item O3/NO2 ADC Temp
  \item SO2/H2S ADC Temp
  \item CO CMT Temp
\end{itemize}


{\centering 
 \[ \text{temperature }(\degree C) = \frac{\text{output value}}{100} \]
}

\subsubsection{ Accelerometer}

\subsubsection{ Gyro}

\bigbreak
\subsection{Alpha Sensor:}
\subsubsection{ Histogram}

\subsubsection{ Firmware}

\subsubsection{ Configuration}